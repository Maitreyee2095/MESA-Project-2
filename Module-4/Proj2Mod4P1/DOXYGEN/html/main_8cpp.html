<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Project2Mod4Part1: main.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Project2Mod4Part1
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('main_8cpp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">main.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;mbed.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad72dbcf6d0153db1b8d8a58001feed83"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:ad72dbcf6d0153db1b8d8a58001feed83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2242fccb813a33d93998482592f1cf79"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a2242fccb813a33d93998482592f1cf79">ONE_SECOND_US</a>&#160;&#160;&#160;1000000.0</td></tr>
<tr class="separator:a2242fccb813a33d93998482592f1cf79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2381e2e95d6dd5b8ed8125d54dd3775e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a2381e2e95d6dd5b8ed8125d54dd3775e">TONE_FREQUENCY</a>&#160;&#160;&#160;1004.0</td></tr>
<tr class="separator:a2381e2e95d6dd5b8ed8125d54dd3775e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a81e0624d7e9f10f8f7e52a569ba24753"><td class="memItemLeft" align="right" valign="top">Serial&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a81e0624d7e9f10f8f7e52a569ba24753">pc</a> (USBTX, USBRX)</td></tr>
<tr class="separator:a81e0624d7e9f10f8f7e52a569ba24753"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a844b1e2323a9cf3e677bd0c485c853fc"><td class="memItemLeft" align="right" valign="top">DigitalOut&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a844b1e2323a9cf3e677bd0c485c853fc">myled</a> (LED1)</td></tr>
<tr class="separator:a844b1e2323a9cf3e677bd0c485c853fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a450031e8508013b8f2cb5a63a5b0f258"><td class="memItemLeft" align="right" valign="top">PwmOut&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a450031e8508013b8f2cb5a63a5b0f258">sawtooth</a> (PB_10)</td></tr>
<tr class="separator:a450031e8508013b8f2cb5a63a5b0f258"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae573ac0e59b8746c2a36052b4d76604b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ae573ac0e59b8746c2a36052b4d76604b">printMainDelay</a> ()</td></tr>
<tr class="memdesc:ae573ac0e59b8746c2a36052b4d76604b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for printing information about the signal to the console.  <a href="main_8cpp.html#ae573ac0e59b8746c2a36052b4d76604b">More...</a><br /></td></tr>
<tr class="separator:ae573ac0e59b8746c2a36052b4d76604b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed38ad4eb47e5725f1a5972264a4b85a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#aed38ad4eb47e5725f1a5972264a4b85a">heartbeat</a> ()</td></tr>
<tr class="memdesc:aed38ad4eb47e5725f1a5972264a4b85a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for toggling the LED value.  <a href="main_8cpp.html#aed38ad4eb47e5725f1a5972264a4b85a">More...</a><br /></td></tr>
<tr class="separator:aed38ad4eb47e5725f1a5972264a4b85a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a> ()</td></tr>
<tr class="memdesc:ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main function.  <a href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">More...</a><br /></td></tr>
<tr class="separator:ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:afc0ddb11e42ccc30a173fc7a6ff177ac"><td class="memItemLeft" align="right" valign="top">Ticker&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#afc0ddb11e42ccc30a173fc7a6ff177ac">timer0</a></td></tr>
<tr class="separator:afc0ddb11e42ccc30a173fc7a6ff177ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e0f7b08a69c5f0926b38938befae3ef"><td class="memItemLeft" align="right" valign="top">Ticker&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a1e0f7b08a69c5f0926b38938befae3ef">timer1</a></td></tr>
<tr class="separator:a1e0f7b08a69c5f0926b38938befae3ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a978d88b393c8a37dc2614c88788b3442"><td class="memItemLeft" align="right" valign="top">Timer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a978d88b393c8a37dc2614c88788b3442">t</a></td></tr>
<tr class="separator:a978d88b393c8a37dc2614c88788b3442"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a117ec85d589f60ed60129697d29285ee"><td class="memItemLeft" align="right" valign="top">const float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a117ec85d589f60ed60129697d29285ee">steps</a> = 60.0</td></tr>
<tr class="separator:a117ec85d589f60ed60129697d29285ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><hr  />
<hr  />
 <h1><a class="anchor" id="autotoc_md0"></a>
ECEN 5803 Mastering Embedded System Architecture</h1>
<h2><a class="anchor" id="autotoc_md1"></a>
Project 2 Module 4 Part 2</h2>
<h2><a class="anchor" id="autotoc_md2"></a>
Signal Analyzer Firmware - Harmonic Analysis</h2>
<h2><a class="anchor" id="autotoc_md3"></a>
main.cpp</h2>
<h2><a class="anchor" id="autotoc_md4"></a>
Designed for:  University of Colorado at Boulder</h2>
<h2><a class="anchor" id="autotoc_md5"></a>
Designed by:  Erich Clever &amp; Maitreyee Rao</h2>
<h2><a class="anchor" id="autotoc_md6"></a>
Version: 1.0</h2>
<h2><a class="anchor" id="autotoc_md7"></a>
Date of current revision:  2021-10-21</h2>
<h2><a class="anchor" id="autotoc_md8"></a>
Target Microcontroller: STM23F401RE</h2>
<h2><a class="anchor" id="autotoc_md9"></a>
Tools used:</h2>
<ul>
<li>ARM mbed compiler</li>
<li>ARM mbed SDK</li>
<li>ST Nucleo-F401RE</li>
<li>Analog Discover 2 - Oscilloscope and spectrum analyzer</li>
</ul>
<h2><a class="anchor" id="autotoc_md10"></a>
Functional Description:</h2>
<p >A 60 Hz PWM signal is used to generate a 1004 Hz sawtooth signal by increasing the duty cycle over 60 iterations. This is similar to the program from module 2 but with a static frequency. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ad72dbcf6d0153db1b8d8a58001feed83" name="ad72dbcf6d0153db1b8d8a58001feed83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad72dbcf6d0153db1b8d8a58001feed83">&#9670;&nbsp;</a></span>DEBUG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2242fccb813a33d93998482592f1cf79" name="a2242fccb813a33d93998482592f1cf79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2242fccb813a33d93998482592f1cf79">&#9670;&nbsp;</a></span>ONE_SECOND_US</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ONE_SECOND_US&#160;&#160;&#160;1000000.0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2381e2e95d6dd5b8ed8125d54dd3775e" name="a2381e2e95d6dd5b8ed8125d54dd3775e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2381e2e95d6dd5b8ed8125d54dd3775e">&#9670;&nbsp;</a></span>TONE_FREQUENCY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TONE_FREQUENCY&#160;&#160;&#160;1004.0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aed38ad4eb47e5725f1a5972264a4b85a" name="aed38ad4eb47e5725f1a5972264a4b85a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed38ad4eb47e5725f1a5972264a4b85a">&#9670;&nbsp;</a></span>heartbeat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void heartbeat </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for toggling the LED value. </p>
<p >This function is called by a timer interrupt routine to show that the system is still operating as programmed. </p>

</div>
</div>
<a id="ae66f6b31b5ad750f1fe042a706a4e3d4" name="ae66f6b31b5ad750f1fe042a706a4e3d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae66f6b31b5ad750f1fe042a706a4e3d4">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main function. </p>
<p >This function generates a sawtooth signal on PB_10 using the PWM method from module 2. A PWM signal with a frequency 60x that of the target frequency (1004 Hz) varies its PWM in 60 iterations from a duty cycle of 0% to 100%. This results in a sawtooth, especially if a low pass filter is applied. </p>

</div>
</div>
<a id="a844b1e2323a9cf3e677bd0c485c853fc" name="a844b1e2323a9cf3e677bd0c485c853fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a844b1e2323a9cf3e677bd0c485c853fc">&#9670;&nbsp;</a></span>myled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DigitalOut myled </td>
          <td>(</td>
          <td class="paramtype">LED1&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a81e0624d7e9f10f8f7e52a569ba24753" name="a81e0624d7e9f10f8f7e52a569ba24753"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81e0624d7e9f10f8f7e52a569ba24753">&#9670;&nbsp;</a></span>pc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Serial pc </td>
          <td>(</td>
          <td class="paramtype">USBTX&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">USBRX&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae573ac0e59b8746c2a36052b4d76604b" name="ae573ac0e59b8746c2a36052b4d76604b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae573ac0e59b8746c2a36052b4d76604b">&#9670;&nbsp;</a></span>printMainDelay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void printMainDelay </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for printing information about the signal to the console. </p>
<p >The period of the synthesized signal and the period of the PWM signal (AKA "Step Size") used to synthesize said signal are displayed over UART at 9600 BAUD. The delay from the main loop execution is also displayed, as this value was used to update the duty cycle more synchronously in the wait_us() function in the superloop. This function is only turned on in debug mode ("DEBUG=1"). </p>

</div>
</div>
<a id="a450031e8508013b8f2cb5a63a5b0f258" name="a450031e8508013b8f2cb5a63a5b0f258"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a450031e8508013b8f2cb5a63a5b0f258">&#9670;&nbsp;</a></span>sawtooth()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PwmOut sawtooth </td>
          <td>(</td>
          <td class="paramtype">PB_10&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a117ec85d589f60ed60129697d29285ee" name="a117ec85d589f60ed60129697d29285ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a117ec85d589f60ed60129697d29285ee">&#9670;&nbsp;</a></span>steps</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const float steps = 60.0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a978d88b393c8a37dc2614c88788b3442" name="a978d88b393c8a37dc2614c88788b3442"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a978d88b393c8a37dc2614c88788b3442">&#9670;&nbsp;</a></span>t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Timer t</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="afc0ddb11e42ccc30a173fc7a6ff177ac" name="afc0ddb11e42ccc30a173fc7a6ff177ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc0ddb11e42ccc30a173fc7a6ff177ac">&#9670;&nbsp;</a></span>timer0</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Ticker timer0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1e0f7b08a69c5f0926b38938befae3ef" name="a1e0f7b08a69c5f0926b38938befae3ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e0f7b08a69c5f0926b38938befae3ef">&#9670;&nbsp;</a></span>timer1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Ticker timer1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="main_8cpp.html">main.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
